# CSR&SSR

## 웹의 역사

---

### 1990년대 중반 - 정적 웹 사이트들

1990년대 중반까지는 모두 **정적 웹 사이트들(Static Sites)**이었다. 이미 잘 만들어진 HTML 문서들이 만들어져 있고, 사용자가 브라우저에서 해당 사이트에 접속하면 서버에 이미 배포되어져 있는 HTML 문서를 받아와서 보여주는 방식이다. 예를 들어 페이지 내에서 다른 링크를 클릭하면, 다시 서버에서 해당 페이지의 HTML 문서를 받아온 후 페이지 전체가 업데이트 되어야 한다. 사용성이 떨어지고 페이지마다 전체가 업데이트 되어야하는 단점이 있다.

### 1996년 - iframe 태그 도입

문서 내에서 또 다른 문서를 담을 수 있는 iframe 태그가 도입이 되었고 이후 **페이지 내에서 부분적으로 문서를 받아와서 업데이트** 할 수가 있게 된다. 지금도 간혹 쓰이고 있는 태그이다.

### 1998년 - XMLHttpRequest

프론트엔드 개발 시 자주 쓰이는 Fetch API의 원조 XHR Web API가 개발이 되어 이제는 **HTML 문서 전체가 아니라 JSON과 같은 포맷으로 서버에서 가볍게 필요한 데이터만 받아올 수 있게 된다.**

해당 데이터를 자바스크립트를 이용해서 동적으로 HTML 요소를 생성한 후 페이지에 업데이트 하는 방식이다.

### 2005년 - AJAX

2005년 XHR과 같은 방식이 공식적인 AJAX라는 이름을 가지게 되고 AJAX를 이용해서 카카오맵, Gmail과 같은 웹 앱들이 만들어지기 시작한다.

이것이 현재 널리 쓰이고 있는 SPA(Single Page Application)이다. 사용자가 한 페이지 내에 머무르면서 **필요한 데이터만 서버에서 받아와 부분적으로 업데이트** 된다. 이런 방식으로 하나의 어플리케이션을 사용하듯 웹 사이트에서도 앱과 같은 사용자 경험을 느끼게 되어 사용성이 굉장히 좋아지게 된다.

## MPA VS SPA

---

### MPA(Multi Page Application)

여러 페이지로 구성된 웹 어플리케이션, 사용자의 클릭과 같이 인터렉션이 발생할 때마다 서버로부터 새로운 html을 받아와서 해당 링크를 이동하여 패이지 전체를 렌더링 하는 전통적인 웹 페이지 구성방법

### SPA(Single Page Application)

하나의 페이지로 구성된 웹 어플리케이션, 브라우저에 최초에 한번 페이지 전체를 로드하고, 이후부터는 특정 부분만 Ajax를 통해 데이터를 바인딩하는 방식

SPA는 현재 웹 개발의 트랜드로 볼 수 있고, React와 vue, 앵귤러와 같은 자바스크립트 프레임워크등이 SPA의 방식을 가지고 있다. 

![Untitled](CSR&SSR%20e06b103865614f0fa8031abc5d95378b/Untitled.png)

## SSR 이란?

---

MPA에서 채택하는 방식으로 Server Side Rendering의 약자, 서버로 부터 완전하게 만들어진 html파일을 받아와 페이지 전체를 렌더링.

![Untitled](CSR&SSR%20e06b103865614f0fa8031abc5d95378b/Untitled%201.png)

1. User가 Website를 요청
2. Server는 ‘Ready to Render’ 즉 즉시 렌더링 가능한 html파일을 만든다. (리소스 체크, 컴파일 후 완성된 html컨텐츠를 만든다.)
3. 클라이언트에게 전달되는 순간, 이미 렌더링 준비가 되어있기 때문에 html은 즉시 렌더링된다. 그러나 사이트 자체는 조작이 불가능(Java Script가 읽히기 전이기 때문)
4. 클라이언트가 자바스크립트를 다운 받는다.
5. 다운 받아지고 있는 사이에 유저는 컨텐츠를 볼 수 있지만 사이트를 조작할 수 없다. 이때의 사용자 조작을 기억하고 있는다.
6. 브라우저가 Javascript 프레임워크를 실행
7. JS까지 성곡적으로 컴파일 되었기 때문에 기억하고 있던 사용자 조작이 실행되고 이제 웹페이지는 상호작용이 가능

> 서버에서 이미 **렌더 가능한 상태로 클라이언트에 전달**되기 때문에, JS가 다운로드 되는 동안 사용자는 **무언가**를 보고 있을 수 있다.
> 

## CSR 이란?

---

Client Side Rendering의 약자로 SSR과 달리 렌터링이 **클라이언트** 쪽에서 일어난다. 서버는 요청을 받으면 클라이언트에 HTML과 JS를 보내준다. 클라이언트는 그것을 받아 렌더링을 시작한다.

![Untitled](CSR&SSR%20e06b103865614f0fa8031abc5d95378b/Untitled%202.png)

1. User가 Website를 요청
2. CDN이 HTML파일과 JS로 접근할 수 있는 링크를 클라이언트로 보낸다.
3. 클라이언트는 HTML과 JS를 다운 받는다. (이때 SSR과 달리 유저는 아무것도 볼 수 없다.)
4. 클라이언트가 JavaScript를 다운받는다. 
5. 다운이 완료된 JS가 실행된다. 이 때 데이터를 위한 API가 호출된다. (이때 유저들은 placeholder를 보게된다.)
6. 서버는 API로 들어온 요청을 처리한다.
7. API로 받아온 데이터를 placeholder자리에 넣어준다. 이때부터 페이지는 사호작용이 가능해진다.

> **서버에서 처리 없이 클라이언트로 보내**주기 때문에 자바스크립트가 모두 다운로드 되고 실행이 끝나기 전까지는 볼 수 있는것이 없다.
> 

## 비교

---

### SSR

---

장점

- SEO, 검색엔진 최적화: 검색엔진이 웹을 크롤링 하면서 페이지에 컨텐츠 색인을 생산하는 과정에서 어플리케이션은 화면을 구성하는 각각의 페이지가 있기 때문에 SEO의 로딩
- 빠른 초기 로딩 → 사용자가 기다리는 시간이 적다.

단점

- 사용자 경험이 나쁨
    - TTV와 TTI간의 시간 간격
    - 빈 껍대기의 웹페이지, 요청시마다 새로고침
- 서버부하
    - 새로운 요청이 생길때마다 바뀌지 않아도 되는 부분도 새로 랜더링해야됨

### CSR

---

장점

- 빠른 속도(초기화면 렌더링에선 x)
- 서버 부하 감소 → 필요한 부분만 요청하고 응답하기 때문
- 사용자 친화적 → 깜빡임 x

단점

- SEO분리
    - 자바스크립트를 사용하여 상호작용 후에 페이지 내용 로드(그 전엔 내용을 볼 수 없기 때문에 검색엔진이 못찾는)
- 초기 로딩 속도가 느림
    - 모든 JS파일을 다운 받아와야됨

## 렌더링 방식 선택기준

---

### SSR

- 상위 노출이 필요
- 누구에게나 동일한 내용을 노출
- 페이지마다 데이터가 자주바뀜

### CSR

- 개인정보 데이터를 기준으로 구성
- 보다 나은 사용자 경험 제공 필요
- 상위노출보다 고객의 데이터 보호가 더 중요